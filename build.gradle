/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'idea'
    id 'kr.entree.spigradle' version '1.2.4'
}


repositories {
    mavenCentral()

    maven { url 'https://jitpack.io' }

}

dependencies {
    compileOnly spigot('1.16.1')
    // implementation 'com.github.oraxen:Oraxen:-SNAPSHOT'
    // implementation 'com.github.oraxen:Oraxen:fix~laura-fixes-cb960ca25d-1' // only version I have found that works
    compileOnly fileTree('build/oraxen')
}

def getVersionName = { ->
    def stdout = new ByteArrayOutputStream()
    exec {
        commandLine 'sh', '-c', 'git describe --tags --always || echo v1.0.0-beta'
        standardOutput = stdout
    }
    return stdout.toString().trim()
}

group = 'com.github.kristianvld'
version = getVersionName()
description = 'AngelTrophies'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'
jar.archiveFileName = 'AngelTrophies.jar'

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

spigot {
    name = project.description
    description = 'AngelReaches placeable trohpies plugin'
    commands {
        skin {
            description = 'Main skin command to skin items'
            usage = '/skin <sub command>'
        }
    }
    authors = ['kristianvld']
    apiVersion = '1.16'
    depends = ['Oraxen']
    website = 'https://github.com/kristianvld/AngelTrophies'
}